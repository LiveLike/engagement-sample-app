//
//  EngagementSDK+Deprecations.swift
//  EngagementSDK
//
//  Created by Xavi Matos on 9/5/19.
//

import Foundation

public extension EngagementSDK {
    /**
     - Parameter clientID: Find more information regarding the Client ID in our [Basic Integration documentation](https://docs.livelike.com/ios/index.html#initialization)
     - Parameter livelikeAccessToken: A token generated by LiveLike that lets the EngagementSDK identify the user
     */
    @objc
    @available(*, deprecated, message: "Replaced by EngagementSDK(clientID:accessTokenStorage:), using this method will cause the SDK to use UserDefaults for storing the user access token, and override any existing value with the given `livelikeAccessToken` parameter.")
    convenience init(clientID: String, livelikeAccessToken: String) {
        let storage = UserDefaultsAccessTokenStorage()
        storage.storeAccessToken(accessToken: livelikeAccessToken)
        
        self.init(clientID: clientID,
                  apiEndpointURL: EngagementSDK.prodAPIEndpoint,
                  accessTokenStorage: storage)
    }
    
    /**
     Generate a new LiveLike Access Token to identify the user within the EngagementSDK.
     
     - Parameter clientID: Find more information regarding the Client ID in our [Basic Integration documentation](https://docs.livelike.com/ios/index.html#initialization)
     - Parameter completion: Success callback that returns a LiveLike Access Token (String)
     */
    @objc
    @available(*, deprecated, message: "This method of token generation has been replaced by the `EngagementSDK.init(clientID:accessTokenStorage:)`")
    static func generateAccessToken(clientID: String, completion: @escaping (String) -> Void) {
        generateAccessToken(apiEndpoint: prodAPIEndpoint, clientID: clientID, completion: completion)
    }
}
